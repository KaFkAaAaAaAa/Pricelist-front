{% extends 'base.html' %}
{% load i18n %}
{% block title %}Transaction List{% endblock %}
{% block content %}
    <div class="container text-center">
        <button class="btn btn-sm btn-outline-danger float-start mb-4" onclick="history.back()">Go back</button>
        <table class="table table-hover table-striped">
            <thead>
            <tr>
                <th scope="col">{% trans "Transaction status" %}</th>
                <th scope="col">{% trans "Transaction last change" %}</th>
                <th scope="col">{% trans "Company name" %}</th>
                <th scope="col">{% trans "Total" %}</th>
            </tr>
            </thead>
            <tbody>
            {% for transaction in transactions %}
                {# user transaction detail if !admin else admin_transaction detail #}
            <tr onclick="window.location.href='{% if session.logged_user.user %}/transactions/{% else %}/transactions/admin/{% endif %}{{ transaction.uuid }}/';">
                <td>{{ transaction.status }}</td>
                <td>{{ transaction.status_time}}</td>
                <td>{{ transaction.orderClient.clientCompanyName }}</td>
                <td>{{ transaction.totals.price }}</td>
<td><a class="btn btn-outline-danger" onclick="event.stopPropagation(); return confirm('{% trans "Are you sure you want to delete this transaction?" %}');" href="/transactions/delete/{{transaction.uuid}}/">{% trans "Delete" %}</a></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
