{% extends "base.html" %} {% block content %}
<div class="container mt-4">
  <h2 class="mb-3">Transaction <code>{{ transaction_uuid }}</code></h2>

  {% if directory_name %}
  <h5>subdirectory: <span class="badge bg-secondary">{{ directory_name }}</span></h5>
  {% endif %} {% if messages %} {% for message in messages %}
  <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %} {% endif %}

  <div class="row mt-4">
    <div class="col-md-6">
      <h4>Directories</h4>
      <ul class="list-group">
        {% for dir in dir_list %}
        <li
          class="list-group-item dir-flex justify-content-between align-items-center"
        >
          <a href="{% url 'browse_transaction_folder' transaction_uuid dir %}">
            {{ dir }}
          </a>
        </li>
        {% empty %}
        <li class="list-group-item text-muted">No subdirectories found.</li>
        {% endfor %}
      </ul>
    </div>

    <div class="col-md-6">
      <h4>Files</h4>
      <ul class="list-group">
        {% for file in file_list %}
        <li
          class="list-group-item dir-flex justify-content-between align-items-center"
        >
          {{ file }}
          <span class="badge bg-light text-muted">read-only</span>
        </li>
        {% empty %}
        <li class="list-group-item text-muted">No files in this directory.</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  {% if can_upload %}
  <div class="card mt-5">
    <div class="card-body">
      <h5 class="card-title">Upload a File</h5>
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="mb-3">
          <input type="file" name="file" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-primary">Upload</button>
      </form>
    </div>
  </div>
  {% endif %}

  <div class="mt-4">
    <a
      href="{% url 'browse_transaction_root' transaction_uuid %}"
      class="btn btn-link"
    >
      Back to transaction root
    </a>
  </div>
</div>
{% endblock %}
